!function(e,t,n){"use strict";function r(e){return e}function a(e){return e}function i(e){gt._dbgMode=e,U=e?"Error: #index in nested view: use #getIndex()":"",lt("dbg",ct.dbg=pt.dbg=e?a:r)}function s(e){return{getTgt:e,map:function(t){var n=this;if(n.src!==t&&(n.src&&n.unmap(),"object"==typeof t)){var r=e.apply(n,arguments);n.src=t,n.tgt=r}}}}function o(e,t){t&&t.onError&&t.onError(e)===!1||(this.name="JsRender Error",this.message=e||"JsRender error")}function u(e,t){var n;e=e||{};for(n in t)e[n]=t[n];return e}function p(e,t,n){return(!dt.rTag||e)&&(J=e?e.charAt(0):J,K=e?e.charAt(1):K,B=t?t.charAt(0):B,L=t?t.charAt(1):L,Q=n||Q,e="\\"+J+"(\\"+Q+")?\\"+K,t="\\"+B+"\\"+L,I="(?:(?:(\\w+(?=[\\/\\s\\"+B+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+B+"]|\\"+B+"(?!\\"+L+"))*?)",dt.rTag=I+")",I=new RegExp(e+I+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),O=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[J,K,B,L,Q]}function c(e,t){t||(t=e,e=n);var r,a,i,s,o=this,u=!t||"root"===t;if(e){if(s=o.type===t?o:n,!s)if(r=o.views,o._.useKey){for(a in r)if(s=r[a].get(e,t))break}else for(a=0,i=r.length;!s&&i>a;a++)s=r[a].get(e,t)}else if(u)for(;o.parent.parent;)s=o=o.parent;else for(;o&&!s;)s=o.type===t?o:n,o=o.parent;return s}function l(){var e=this.get("item");return e?e.index:n}function d(){return this.index}function g(t){var r,a=this,i=a.linkCtx,s=(a.ctx||{})[t];return s===n&&i&&i.ctx&&(s=i.ctx[t]),s===n&&(s=ct[t]),s&&("function"!=typeof s||s._wrp||(r=function(){return s.apply(this&&this!==e?this:a,arguments)},r._wrp=1,u(r,s))),r||s}function f(e,t,r){var a,i,s,o=+r===r&&r,u=t.linkCtx;return o&&(r=(o=t.tmpl.bnds[o-1])(t.data,t,st)),s=r.args[0],(e||o)&&(i=u&&u.tag||{_:{inline:!u,bnd:o},tagName:e+":",flow:!0,_is:"tag"},u&&(u.tag=i,i.linkCtx=i.linkCtx||u,r.ctx=E(r.ctx,u.view.ctx)),i.tagCtx=r,r.view=t,i.ctx=r.ctx||{},delete r.ctx,t._.tag=i,e="true"!==e&&e,e&&((a=t.getRsc("converters",e))||k("Unknown converter: {{"+e+":"))&&(i.depends=a.depends,s=a.apply(i,r.args)),s=s!=n?s:"",s=o&&t._.onRender?t._.onRender(s,t,o):s,t._.tag=n),s}function m(e,t){for(var r,a,i=this;r===n&&i;)a=i.tmpl[e],r=a&&a[t],i=i.parent;return r||st[e][t]}function v(e,t,r,a,i){var s,o,p,c,l,d,g,f,m,v,h,x,w,_,y,b,j,R="",T=+a===a&&a,A=t.linkCtx||0,N=t.ctx,$=r||t.tmpl,S=t._;for("tag"===e._is&&(o=e,e=o.tagName),T&&(a=(x=$.bnds[T-1])(t.data,t,st)),g=a.length,o=o||A.tag,d=0;g>d;d++)m=a[d],h=m.tmpl,h=m.content=h&&$.tmpls[h-1],r=m.props.tmpl,d||r&&o||(w=t.getRsc("tags",e)||k("Unknown tag: {{"+e+"}}")),r=r||(o?o:w).template||h,r=""+r===r?t.getRsc("templates",r)||ut(r):r,u(m,{tmpl:r,render:C,index:d,view:t,ctx:E(m.ctx,N)}),o||(w._ctr?(o=new w._ctr,_=!!o.init,o.attr=o.attr||w.attr||n):o={render:w.render},o._={inline:!A},A&&(A.attr=o.attr=A.attr||o.attr,A.tag=o,o.linkCtx=A),(o._.bnd=x||A.fn)?o._.arrVws={}:o.dataBoundOnly&&k("{^{"+e+"}} tag must be data-bound"),o.tagName=e,o.parent=l=N&&N.tag,o._is="tag",o._def=w),m.tag=o,o.map&&o.tagCtxs&&(m.map=o.tagCtxs[d].map),o.flow||(v=m.ctx=m.ctx||{},p=o.parents=v.parentTags=N&&E(v.parentTags,N.parentTags)||{},l&&(p[l.tagName]=l),v.tag=o);for(o.tagCtxs=a,S.tag=o,o.rendering={},d=0;g>d;d++)m=o.tagCtx=a[d],j=m.args,(y=m.props.map||o).map&&(j.length||!d||m.props.map)&&(j.length||(j=[t.data]),b=m.map=u(m.map||{unmap:y.unmap},m.props),b.src!==j[0]&&(b.src&&b.unmap(),y.map.apply(b,j)),j=[b.tgt]),o.ctx=m.ctx,!d&&_&&(o.init(m,A,o.ctx),m=o.tagCtx,_=n),f=n,s=o.render,(s=o.render)&&(f=s.apply(o,j)),f=f!==n?f:m.tmpl&&m.render(j[0],n,!0)||(i?n:""),R=R?R+(f||""):f;return delete o.rendering,o.tagCtx=o.tagCtxs[0],o.ctx=o.tagCtx.ctx,o._.inline&&(c=o.attr)&&c!==nt&&(R="text"===c?pt.html(R):""),T&&t._.onRender?t._.onRender(R,t,T):R}function h(e,t,n,r,a,i,s,o){var u,p,f,v="array"===t,h={key:0,useKey:v?0:1,id:""+et++,onRender:o,bnds:{}},x={data:r,tmpl:a,content:s,views:v?[]:{},parent:n,type:t,get:c,getIndex:d,getRsc:m,hlp:g,_:h,_is:"view"};return n?(u=n.views,p=n._,p.useKey?(u[h.key="_"+p.useKey++]=x,x.index=U,x.getIndex=l,f=p.tag,h.bnd=v&&(!f||!!f._.bnd&&f)):u.splice(h.key=x.index=i,0,x),x.ctx=e||n.ctx):x.ctx=e,x}function x(e){var t,n,r,a,i;for(t in it)if(a=it[t],(i=a.compile)&&(n=e[t+"s"]))for(r in n)n[r]=i(r,n[r],e,t,a)}function w(e,t,n){var r,a;return"function"==typeof t?t={depends:t.depends,render:t}:((a=t.template)&&(t.template=""+a===a?ut[a]||ut(a):a),t.init!==!1&&(r=t._ctr=function(){},(r.prototype=t).constructor=r)),n&&(t._parentTmpl=n),t}function _(r,a,i,s,o,u){function p(n){if(""+n===n||n.nodeType>0){try{l=n.nodeType>0?n:!O.test(n)&&t&&t(e.document).find(n)[0]}catch(a){}return l&&(n=l.getAttribute(rt),r=r||n,n=ut[n],n||(r=r||"_"+Z++,l.setAttribute(rt,r),n=ut[r]=_(r,l.innerHTML,i,s,o,u))),n}}var c,l;return a=a||"",c=p(a),u=u||(a.markup?a:{}),u.tmplName=r,i&&(u._parentTmpl=i),!c&&a.markup&&(c=p(a.markup))&&(!c.fn||c.debug===a.debug&&c.allowCode===a.allowCode||(c=c.markup)),c!==n?(r&&!i&&(at[r]=function(){return a.render.apply(a,arguments)}),c.fn||a.fn?c.fn&&(a=r&&r!==c.tmplName?E(u,c):c):(a=y(c,u),R(c.replace(z,"\\$&"),a)),x(u),a):void 0}function y(e,t){var n,r=gt.wrapMap||{},a=u({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:C},t);return t.htmlTag||(n=W.exec(e),a.htmlTag=n?n[1].toLowerCase():""),n=r[a.htmlTag],n&&n!==r.div&&(a.markup=S.trim(a.markup)),a}function b(e,t){function r(i,s,o){var u,p,c,l;if(i&&""+i!==i&&!i.nodeType&&!i.markup){for(c in i)r(c,i[c],s);return st}return s===n&&(s=i,i=n),i&&""+i!==i&&(o=s,s=i,i=n),l=o?o[a]=o[a]||{}:r,p=t.compile,(u=dt.onBeforeStoreItem)&&(p=u(l,i,s,p)||p),i?null===s?delete l[i]:l[i]=p?s=p(i,s,o,e,t):s:s=p(n,s),p&&s&&(s._is=e),(u=dt.onStoreItem)&&u(l,i,s,p),s}var a=e+"s";st[a]=r,it[e]=t}function C(e,t,r,a,i,s){var o,u,p,c,l,d,g,f,m,v,x,w,_,y=this,b=!y.attr||y.attr===nt,C="";if(i===!0&&(g=!0,i=0),y.tag?(f=y,y=y.tag,v=y._,w=y.tagName,_=f.tmpl,t=E(t,y.ctx),m=f.content,f.props.link===!1&&(t=t||{},t.link=!1),a=a||f.view,e=e===n?a:e):_=y.jquery&&(y[0]||k('Unknown template: "'+y.selector+'"'))||y,_&&(!a&&e&&"view"===e._is&&(a=e),a&&(m=m||a.content,s=s||a._.onRender,e===a&&(e=a.data,r=!0),t=E(t,a.ctx)),a&&a.data!==n||((t=t||{}).root=e),_.fn||(_=ut[_]||ut(_)),_)){if(s=(t&&t.link)!==!1&&b&&s,x=s,s===!0&&(x=n,s=a._.onRender),t=_.helpers?E(_.helpers,t):t,S.isArray(e)&&!r)for(c=g?a:i!==n&&a||h(t,"array",a,e,_,i,m,s),o=0,u=e.length;u>o;o++)p=e[o],l=h(t,"item",c,p,_,(i||0)+o,m,s),d=_.fn(p,l,st),C+=c._.onRender?c._.onRender(d,l):d;else c=g?a:h(t,w||"data",a,e,_,i,m,s),v&&!y.flow&&(c.tag=y),C+=_.fn(e,c,st);return x?x(C,c):C}return""}function k(e){throw new dt.Error(e)}function j(e){k("Syntax error\n"+e)}function R(e,t,n,r){function a(t){t-=c,t&&d.push(e.substr(c,t).replace(D,"\\n"))}function i(t){t&&j('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function s(s,p,f,m,v,h,x,w,_,y,b,C){h&&(v=":",m=nt),y=y||n;var k,R,T=p&&[],E="",N="",$="",S=!y&&!v&&!x;f=f||v,a(C),c=C+s.length,w?u&&d.push(["*","\n"+_.replace(H,"$1")+"\n"]):f?("else"===f&&(P.test(_)&&j('for "{{else if expr}}" use "{{else expr}}"'),T=g[6],g[7]=e.substring(g[7],C),g=l.pop(),d=g[3],S=!0),_&&(_=_.replace(D," "),E=A(_,T,t).replace(G,function(e,t,n){return t?$+=n+",":N+=n+",",""})),N=N.slice(0,-1),E=E.slice(0,-1),k=N&&N.indexOf("noerror:true")+1&&N||"",o=[f,m||!!r||"",E,S&&[],'params:"'+_+'",props:{'+N+"}"+($?",ctx:{"+$.slice(0,-1)+"}":""),k,T||0],d.push(o),S&&(l.push(g),g=o,g[7]=c)):b&&(R=g[0],i(b!==R&&"else"!==R&&b),g[7]=e.substring(g[7],C),g=l.pop()),i(!g&&b),d=g[3]}var o,u=t&&t.allowCode,p=[],c=0,l=[],d=p,g=[,,,p];return i(l[0]&&l[0][3].pop()[0]),e.replace(I,s),a(e.length),(c=p[p.length-1])&&i(""+c!==c&&+c[7]===c[7]&&c[0]),T(p,n?e:t,n)}function T(e,n,r){var a,i,s,o,u,p,c,l,d,g,f,m,v,h,x,w,_,b,C,k,R,A,E,N,$,S=0,M="",I="",O={},U=e.length;for(""+n===n?(x=r?'data-link="'+n.replace(D," ").slice(1,-1)+'"':n,n=0):(x=n.tmplName||"unnamed",n.allowCode&&(O.allowCode=!0),n.debug&&(O.debug=!0),m=n.bnds,h=n.tmpls),a=0;U>a;a++)if(i=e[a],""+i===i)M+='\nret+="'+i+'";';else if(s=i[0],"*"===s)M+=""+i[1];else{if(o=i[1],u=i[2],b=i[3],p=i[4],I=i[5],C=i[7],(A="else"===s)||(S=0,m&&(v=i[6])&&(S=m.push(v))),(E=":"===s)?(o&&(s=o===nt?">":o+s),I&&(N="prm"+a,I="try{var "+N+"=["+u+"][0];}catch(e){"+N+'="";}\n',u=N)):(b&&(w=y(C,O),w.tmplName=x+"/"+s,T(b,w),h.push(w)),A||(_=s,R=M,M=""),k=e[a+1],k=k&&"else"===k[0]),p+=",args:["+u+"]}",E&&v||o&&">"!==s){if($=new Function("data,view,j,u"," // "+x+" "+S+" "+s+"\n"+I+"return {"+p+";"),$.paths=v,$._ctxs=s,r)return $;f=1}if(M+=E?"\n"+(v?"":I)+(r?"return ":"ret+=")+(f?(f=0,g=!0,'c("'+o+'",view,'+(v?(m[S-1]=$,S):"{"+p)+");"):">"===s?(l=!0,"h("+u+");"):(d=!0,"(v="+u+")!="+(r?"=":"")+'u?v:"";')):(c=!0,"{view:view,tmpl:"+(b?h.length:"0")+","+p+","),_&&!k){if(M="["+M.slice(0,-1)+"]",(r||v)&&(M=new Function("data,view,j,u"," // "+x+" "+S+" "+_+"\nreturn "+M+";"),v&&((m[S-1]=M).paths=v),M._ctxs=s,r))return M;M=R+'\nret+=t("'+_+'",view,this,'+(S||M)+");",v=0,_=0}}M="// "+x+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(d?",v":"")+(c?",t=j._tag":"")+(g?",c=j._cnvt":"")+(l?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(gt.tryCatch?"try{\n":"")+(O.debug?"debugger;":"")+M+(r?"\n":"\nreturn ret;\n")+(gt.tryCatch?"\n}catch(e){return j._err(e);}":"");try{M=new Function("data,view,j,u",M)}catch(F){j("Compiled template code:\n\n"+M,F)}return n&&(n.fn=M),M}function A(e,t,n){function r(r,g,f,m,v,h,x,w,_,y,b,C,k,T,E,N,$,S,M,I){function O(e,n,r,o,u,p,c,l){if(r&&(t&&("linkTo"===a&&(i=t._jsvto=t._jsvto||[],i.push(v)),(!a||s)&&t.push(v.slice(n.length))),"."!==r)){var d=(o?'view.hlp("'+o+'")':u?"view":"data")+(l?(p?"."+p:o?"":u?"":"."+r)+(c||""):(l=o?"":u?p||"":r,""));return d+=l?"."+l:"",n+("view.data"===d.slice(0,9)?d.slice(5):d)}return e}var U;return h=h||"",f=f||g||C,v=v||_,y=y||$||"",!x||d||l?(t&&N&&!d&&!l&&(!a||s||i)&&(U=p[c],I.length-1>M-U&&(U=I.slice(U,M+1),N=K+":"+U+B,N=o[N]=o[N]||R(J+N+L,n,!0),N.paths||A(U,N.paths=[],n),(i||t).push({_jsvOb:N}))),d?(d=!k,d?r:'"'):l?(l=!T,l?r:'"'):(f?(c++,p[c]=M++,f):"")+(S?c?"":a?(a=s=i=!1,"\b"):",":w?(c&&j(e),a=v,s=m,"\b"+v+":"):v?v.split("^").join(".").replace(V,O)+(y?(u[++c]=!0,"."!==v.charAt(0)&&(p[c]=M),y):h):h?h:E?(u[c--]=!1,E+(y?(u[++c]=!0,y):"")):b?(u[c]||j(e),","):g?"":(d=k,l=T,'"'))):void j(e)}var a,i,s,o=n.links,u={},p={0:-1},c=0,l=!1,d=!1;return(e+" ").replace(/\)\^/g,").").replace(q,r)}function E(e,t){return e&&e!==t?t?u(u({},t),e):e:t&&u({},t)}function N(e){return tt[e]||(tt[e]="&#"+e.charCodeAt(0)+";")}function $(e){var t,n,r=[];if("object"==typeof e)for(t in e)n=e[t],n&&n.toJSON&&!n.toJSON()||"function"!=typeof n&&r.push({key:t,prop:e[t]});return r}if(!(t&&t.views||e.jsviews)){var S,M,I,O,U,F="v1.0.0-beta",J="{",K="{",B="}",L="}",Q="^",V=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,q=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,D=/[ \t]*(\r\n|\n|\r)/g,H=/\\(['"])/g,z=/['"\\]/g,G=/\x08(~)?([^\x08]+)\x08/g,P=/^if\s/,W=/<(\w+)[>\s]/,X=/[\x00`><"'&]/g,Y=X,Z=0,et=0,tt={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},nt="html",rt="data-jsv-tmpl",at={},it={template:{compile:_},tag:{compile:w},helper:{},converter:{}},st={jsviews:F,render:at,settings:function(e){u(gt,e),i(gt._dbgMode),gt.jsv&&gt.jsv()},sub:{View:h,Error:o,tmplFn:R,parse:A,extend:u,error:k,syntaxError:j,DataMap:s},_cnvt:f,_tag:v,_err:function(e){return gt._dbgMode?"Error: "+(e.message||e)+". ":""}};(o.prototype=new Error).constructor=o,l.depends=function(){return[this.get("item"),"index"]},d.depends=function(){return["index"]};for(M in it)b(M,it[M]);var ot,ut=st.templates,pt=st.converters,ct=st.helpers,lt=st.tags,dt=st.sub,gt=st.settings;t?(S=t,S.fn.render=C,(ot=S.observable)&&(u(dt,ot.sub),delete ot.sub)):(S=e.jsviews={},S.isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}),S.render=at,S.views=st,S.templates=ut=st.templates,gt({debugMode:i,delimiters:p,_dbgMode:!0,tryCatch:!0}),lt({"else":function(){},"if":{render:function(e){var t=this,n=t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render());return n},onUpdate:function(e,t,n){var r,a,i;for(r=0;(a=this.tagCtxs[r])&&a.args.length;r++)if(a=a.args[0],i=!a!=!n[r].args[0],a||i)return i;return!1},flow:!0},"for":{render:function(e){var t=this,r=t.tagCtx,a="",i=0;return arguments.length||(e=r.view.data),t.rendering.done||(e!==n&&(a+=r.render(e),i+=S.isArray(e)?e.length:1),(t.rendering.done=i)&&(t.selected=r.index)),a},flow:!0},include:{flow:!0},"*":{render:r,flow:!0}}),lt({props:u(u({},lt["for"]),s($))}),pt({html:function(e){return e!=n?String(e).replace(Y,N):""},attr:function(e){return e!=n?String(e).replace(X,N):null===e?e:""},url:function(e){return e!=n?encodeURI(String(e)):null===e?e:""}}),p()}}(this,this.jQuery);